import React, {
   createContext,
   useContext,
   useEffect,
   useMemo,
   useState,
} from 'react';

export type AppLanguage = 'en' | 'om';

const translations: Record<AppLanguage, Record<string, string>> = {
   en: {
      'nav.dashboard': 'Dashboard',
      'nav.packages': 'Packages',
      'nav.withdraw': 'Withdraw',
      'nav.referrals': 'Referrals',
      'nav.admin': 'Admin',
      'nav.profile': 'Profile',
      'nav.login': 'Login',
      'nav.register': 'Register',
      'nav.logout': 'Logout',
      'nav.getStarted': 'Get Started',
      'auth.welcome': 'Welcome Back',
      'auth.loginCta': 'Log In',
      'auth.forgot': 'Forgot password?',
      'auth.noAccount': "Don't have an account?",
      'auth.signupNow': 'Sign up now',
      'auth.createAccount': 'Create Account',
      'auth.startJourney': 'Start your investment journey today',
      'auth.haveAccount': 'Already have an account?',
      'auth.loginInstead': 'Log in',
      'auth.registerCta': 'Register',
      'auth.getStarted': 'Start Investing',
      'dashboard.welcome': 'Welcome Back',
      'dashboard.overview': "Here's your investment overview",
      'dashboard.totalBalance': 'Total Balance',
      'dashboard.trendThisMonth': '+12.5% this month',
      'dashboard.activeInvestments': 'Active Investments',
      'dashboard.trendInvestments': 'Investments',
      'dashboard.recentTransactions': 'Recent Transactions',
      'dashboard.trendLast10': 'Last 10 fetched',
      'dashboard.referrals': 'Referrals',
      'dashboard.trendTotal': 'Total',
      'dashboard.activePackages': 'Active Packages',
      'dashboard.viewAll': 'View All',
      'dashboard.activeInvestment': 'Active Investment',
      'dashboard.investment': 'Investment',
      'dashboard.totalReturnPlan': 'Total Return (plan)',
      'dashboard.dailyProfitBps': 'Daily Profit (bps)',
      'dashboard.status': 'Status',
      'dashboard.progress': 'Progress',
      'dashboard.quickActions': 'Quick Actions',
      'dashboard.newInvestment': 'New Investment',
      'dashboard.withdrawFunds': 'Withdraw Funds',
      'dashboard.inviteFriends': 'Invite Friends',
      'dashboard.inviteEarn': 'Invite & Earn',
      'dashboard.inviteEarnBody':
         'Share your referral link and earn up to 10% commission on every investment!',
      'dashboard.shareNow': 'Share Now',
      'withdraw.title': 'Withdraw Funds',
      'withdraw.subtitle': 'Request a withdrawal from your available balance',
      'withdraw.availableBalance': 'Available Balance',
      'withdraw.totalAvailable': 'Total Available',
      'withdraw.infoTitle': 'Withdrawal Info',
      'withdraw.amountLabel': 'Withdrawal Amount',
      'withdraw.minAmountLine': 'Minimum withdrawal: 50.00 Birr',
      'withdraw.paymentMethod': 'Payment Method',
      'withdraw.method.bank': 'Bank Transfer',
      'withdraw.method.paypal': 'PayPal',
      'withdraw.method.crypto': 'Crypto Wallet',
      'withdraw.method.wire': 'Wire Transfer',
      'withdraw.accountDetails': 'Account Details',
      'withdraw.accountPlaceholder':
         'Enter your account number or wallet address',
      'withdraw.notes': 'Notes (Optional)',
      'withdraw.notesPlaceholder': 'Any special instructions...',
      'withdraw.submit': 'Request Withdrawal',
      'withdraw.submitting': 'Submitting...',
      'withdraw.history': 'Withdrawal History',
      'withdraw.minimumLabel': 'Minimum Amount',
      'withdraw.minimumAmountDetail': '50.00 Birr per withdrawal',
      'withdraw.processingTime': 'Processing Time',
      'withdraw.processingTimeDetail': '1-3 business days',
      'withdraw.fees': 'Fees',
      'withdraw.feesDetail': 'No fees for VIP members',
      'withdraw.important': 'Important',
      'withdraw.tip1': '• Ensure account details are correct',
      'withdraw.tip2': '• Withdrawals are processed Mon-Fri',
      'withdraw.tip3': '• VIP members get priority processing',
      'withdraw.tip4': '• Contact support for large withdrawals',
      'withdraw.helpTitle': 'Need Help?',
      'withdraw.helpText': 'Our support team is available 24/7 to assist you',
      'withdraw.contactSupport': 'Contact Support',
      'withdraw.minError': 'Minimum withdrawal is 50.00 Birr',
      'withdraw.success': 'Withdrawal requested',
      'withdraw.error': 'Request failed',
      'referrals.title': 'Referral Program',
      'referrals.subtitle':
         'Invite friends and earn commission on their investments',
      'referrals.totalReferrals': 'Total Referrals',
      'referrals.totalEarned': 'Total Earned',
      'referrals.activeReferrals': 'Active Referrals',
      'referrals.trendReferrals': '+3 this month',
      'referrals.trendEarned': '+Birr 175 this week',
      'referrals.trendActive': '62.5% rate',
      'referrals.yourLink': 'Your Referral Link',
      'referrals.code': 'Referral Code:',
      'referrals.shareSocial': 'Share on Social',
      'referrals.copyCode': 'Copy Code',
      'referrals.listTitle': 'Your Referrals',
      'referrals.viewAll': 'View All',
      'referrals.commissionRates': 'Commission Rates',
      'referrals.howItWorks': 'How It Works',
      'referrals.step1': 'Share your unique referral link',
      'referrals.step2': 'Friends sign up using your link',
      'referrals.step3': 'They make their first investment',
      'referrals.step4': 'You earn commission immediately',
      'referrals.bonusTip': 'Bonus Tip',
      'referrals.bonusCopy':
         'Referrals who invest in higher VIP packages earn you more commission. Share the benefits of premium packages!',
      'referrals.copyToast': 'Copied',
      'profile.title': 'Profile Settings',
      'profile.subtitle': 'Manage your account information and preferences',
      'profile.personalInfo': 'Personal Information',
      'profile.firstName': 'First Name',
      'profile.lastName': 'Last Name',
      'profile.email': 'Email Address',
      'profile.phone': 'Phone Number',
      'profile.address': 'Address',
      'profile.addressPlaceholder': '123 Main St, City, Country',
      'profile.save': 'Save Changes',
      'profile.security': 'Security',
      'profile.currentPassword': 'Current Password',
      'profile.newPassword': 'New Password',
      'profile.confirmPassword': 'Confirm New Password',
      'profile.updatePassword': 'Update Password',
      'profile.notifications': 'Notifications',
      'profile.emailNotif': 'Email Notifications',
      'profile.emailNotifDesc': 'Receive updates via email',
      'profile.smsNotif': 'SMS Notifications',
      'profile.smsNotifDesc': 'Receive text messages',
      'profile.profitNotif': 'Daily Profit Alerts',
      'profile.profitNotifDesc': 'Daily earnings updates',
      'profile.withdrawNotif': 'Withdrawal Updates',
      'profile.withdrawNotifDesc': 'Status of withdrawals',
      'profile.saveToast': 'Profile updates not supported yet.',
      'profile.passwordToast': 'Password update not implemented yet.',
      'profile.changeAvatar': 'Change Avatar',
      'profile.accountInfo': 'Account Info',
      'profile.memberSince': 'Member since:',
      'profile.vipStatus': 'VIP Status:',
      'profile.verified': 'Verified:',
      'profile.roleAdmin': 'Admin',
      'profile.roleMember': 'Member',
      'profile.dangerZone': 'Danger Zone',
      'profile.deleteCopy':
         'Permanently delete your account and all associated data',
      'profile.delete': 'Delete Account',
      'common.yes': 'Yes',
      'common.no': 'No',
      'admin.title': 'Admin',
      'admin.processProfits': 'Process Daily Profits',
      'admin.runJob': 'Run Job Now',
      'admin.processing': 'Processing…',
      'admin.done': 'Done',
      'admin.failed': 'Failed',
      'admin.approveInvestment': 'Approve Investment',
      'admin.pendingInvestments': 'Pending Investments',
      'admin.package': 'Package:',
      'admin.amount': 'Amount:',
      'admin.status': 'Status:',
      'admin.approve': 'Approve',
      'admin.loading': 'Loading…',
      'admin.failedLoad': 'Failed to load',
      'admin.investmentId': 'Investment ID',
      'admin.pendingWithdrawals': 'Pending Withdrawals',
      'admin.approveWithdrawals': 'Manage Withdrawals',
      'admin.amountLabel': 'Amount:',
      'admin.destination': 'Dest:',
      'admin.withdrawalId': 'Withdrawal ID',
      'admin.reject': 'Reject',
      'admin.markPaid': 'Mark Paid',
      'admin.approved': 'Approved',
      'admin.updated': 'Updated',
      'admin.actionFailed': 'Action failed',
      'home.badge': 'Invest today before ends',
      'home.headline1': 'Invest Smart Get',
      'home.headline2': 'Profit Daily',
      'home.subheadline':
         'Join thousands of investors earning consistent daily returns with our premium VIP investment packages. Secure, transparent, and profitable.',
      'home.ctaPrimary': 'Start Investing Now',
      'home.ctaSecondary': 'View Packages',
      'home.statPackages': 'Packages',
      'home.statDuration': 'Investment Duration',
      'home.statInvestors': 'Investors',
      'home.whyTitle': 'Why Choose',
      'home.whySubtitle':
         'Built on trust, transparency, and proven results. Experience the difference of professional investment management.',
      'home.benefit.daily.title': 'Daily Profits',
      'home.benefit.daily.desc':
         'Earn consistent daily returns on your investment with transparent tracking',
      'home.benefit.secure.title': 'Secure Platform',
      'home.benefit.secure.desc':
         'Bank-level security with encrypted transactions and data protection',
      'home.benefit.referral.title': 'Referral Rewards',
      'home.benefit.referral.desc':
         'Earn extra income by referring friends and building your network',
      'home.benefit.withdrawals.title': 'Fast Withdrawals',
      'home.benefit.withdrawals.desc':
         'Quick and hassle-free withdrawal process with multiple payment options',
      'home.cta2.title': 'Ready to level up your investments?',
      'home.cta2.body':
         'Start with small packages or unlock everything with Pro and Ultra. Your investment journey begins now.',
      'home.cta2.button': 'View Pricing',
      'home.footer': '© 2024 VIP Invest. All rights reserved.',
      'packages.title': 'VIP Investment',
      'packages.titleHighlight': 'Packages',
      'packages.subtitle':
         'Choose the package that fits your investment goals. All packages include daily profits, referral bonuses, and secure withdrawals.',
      'packages.helpTitle': 'Need Help Choosing?',
      'packages.helpBody':
         'Our investment advisors are ready to help you select the perfect package for your goals.',
      'packages.helpCta': 'Contact Support',
      'packages.toastSuccess': 'Investment created',
      'packages.toastFail': 'Failed to invest',
      'packages.dialogTitle': 'Complete Payment',
      'packages.dialogPay': 'Pay using TeleBirr by scanning the QR code below',
      'packages.dialogAfterPay': 'After paying, click “Confirm Payment”',
      'packages.dialogCancel': 'Cancel',
      'packages.dialogConfirm': 'I have paid — Confirm',
   },
   om: {
      'nav.dashboard': 'Daashboordii',
      'nav.packages': 'Pakeejota',
      'nav.withdraw': 'Baafata Maallaqa',
      'nav.referrals': 'Fayyadamtoota Fidaa',
      'nav.admin': 'Bulchaa',
      'nav.profile': 'Piroofaayilii',
      'nav.login': 'Seeni',
      'nav.register': "Galma'i",
      'nav.logout': "Ba'i",
      'nav.getStarted': 'Jalqabi',
      'auth.welcome': "Baga Deebi'e",
      'auth.loginCta': 'Seeni',
      'auth.forgot': 'Iccitii dagatteettaa?',
      'auth.noAccount': 'Herrega hin qabduu?',
      'auth.signupNow': "Amma galma'i",
      'auth.createAccount': 'Herrega Uumi',
      'auth.startJourney': 'Imala kee ittiin badhaaddu jalqabi',
      'auth.haveAccount': "Duratti galma'ateettaa?",
      'auth.loginInstead': 'Seeni',
      'auth.registerCta': "Galma'i",
      'auth.getStarted': 'Jalqabi',
      'dashboard.welcome': "Baga Deebi'e",
      'dashboard.overview': 'Xiinxala Ibsaa Maallaqaa kee kana',
      'dashboard.totalBalance': 'Herrega Waliigalaa',
      'dashboard.trendThisMonth': '%%12.5 ji’a kana',
      'dashboard.activeInvestments': 'Inveestii Jiru',
      'dashboard.trendInvestments': 'Inveestii',
      'dashboard.recentTransactions': 'Taraansferoota Dhiyoo',
      'dashboard.trendLast10': 'Karaan 10 booda',
      'dashboard.referrals': 'Hirmaachistoota',
      'dashboard.trendTotal': 'Waliigala',
      'dashboard.activePackages': 'Pakeejii Jiru',
      'dashboard.viewAll': 'Hunda Ilaali',
      'dashboard.activeInvestment': 'Inveestii Jiru',
      'dashboard.investment': 'Inveestii',
      'dashboard.totalReturnPlan': 'Deebi’aa Waliigalaa (plaanii)',
      'dashboard.dailyProfitBps': 'Bu’a Guyyaa (bps)',
      'dashboard.status': 'Haala',
      'dashboard.progress': 'Imalaa',
      'dashboard.quickActions': 'Dalagaa Ariifataa',
      'dashboard.newInvestment': 'Inveestii Haaraa',
      'dashboard.withdrawFunds': 'Maallaqa Baasi',
      'dashboard.inviteFriends': 'Hiriyoota Afeerii',
      'dashboard.inviteEarn': 'Afeerii fi Argadhu',
      'dashboard.inviteEarnBody':
         'Koodii hirmaachisummaa kee qoodi; komishinii hanga 10% argadhu!',
      'dashboard.shareNow': 'Amma Qoodi',
      'withdraw.title': 'Maallaqa Baasi',
      'withdraw.subtitle': 'Balance tee irraa maallaqa baafachuu gaafadhu',
      'withdraw.availableBalance': 'Balance Jiru',
      'withdraw.totalAvailable': 'Wanta Argamu',
      'withdraw.infoTitle': 'Oduu Baafataa',
      'withdraw.amountLabel': 'Hanga Baafamuu',
      'withdraw.minAmountLine': 'Baafni xiqqaan Birr 50.00',
      'withdraw.paymentMethod': 'Mala Kaffaltii',
      'withdraw.method.bank': 'Baankii Irraan Dabarsi',
      'withdraw.method.paypal': 'PayPal',
      'withdraw.method.crypto': 'Wallet Kirepto',
      'withdraw.method.wire': 'Wire Transfer',
      'withdraw.accountDetails': 'Ibsa Herregaa',
      'withdraw.accountPlaceholder':
         'Lakkoofsa herregaa yookaan teessoo wallet galchi',
      'withdraw.notes': 'Yaadannoo (filannoo)',
      'withdraw.notesPlaceholder': 'Qajeelfama addaa...',
      'withdraw.submit': 'Gaafadhu',
      'withdraw.submitting': 'Ergaa jiru...',
      'withdraw.history': 'Seenaa Baafataa',
      'withdraw.minimumLabel': 'Hanga Xiqqaa',
      'withdraw.minimumAmountDetail': 'Baafata hundaaf Birr 50.00',
      'withdraw.processingTime': 'Yeroo Hojiirra Oolmaa',
      'withdraw.processingTimeDetail': 'Guyyaa hojii 1-3',
      'withdraw.fees': 'Kaffaltii',
      'withdraw.feesDetail': 'VIPf kaffaltiin hin jiru',
      'withdraw.important': 'Murteeffama',
      'withdraw.tip1': '• Ibsa herregaa sirrii ta’uu mirkaneessi',
      'withdraw.tip2': '• Baafanni Wiixata-Jimaata qopha’a',
      'withdraw.tip3': '• VIP dursaa argatu',
      'withdraw.tip4': '• Baafata guddaa irratti tajaajila walitti dhiyeessi',
      'withdraw.helpTitle': 'Gargaarsa barbaadaa?',
      'withdraw.helpText': 'Deeggarsi keenya sa’aatii 24/7 siif jira',
      'withdraw.contactSupport': 'Tajaajila Quunnami',
      'withdraw.minError': 'Baafanni xiqqaan Birr 50.00',
      'withdraw.success': 'Baafata ni gaafatte',
      'withdraw.error': 'Gaafannoon kufe',
      'referrals.title': 'Sagantaa Fayyadamtoota',
      'referrals.subtitle': 'Hiriyoota affeerii; mindaa irraa argadhu',
      'referrals.totalReferrals': 'Hirmaattoota Waliigalaa',
      'referrals.totalEarned': 'Mindaa Waliigalaa',
      'referrals.activeReferrals': 'Hirmaattoota Jiru',
      'referrals.trendReferrals': '+3 ji’a kana',
      'referrals.trendEarned': '+Birr 175 torban kana',
      'referrals.trendActive': 'Hirmaannaa 62.5%',
      'referrals.yourLink': 'Link Hirmaachisuu',
      'referrals.code': 'Koodii Hirmaachisuu:',
      'referrals.shareSocial': 'Soshaal irratti qoodi',
      'referrals.copyCode': 'Koodii afeerraa copy godhi',
      'referrals.listTitle': 'Fayyadamtoota Kee',
      'referrals.viewAll': 'Hunda Ilaali',
      'referrals.commissionRates': 'Hirmaannaa Mindaa',
      'referrals.howItWorks': 'Akkaataa Itti Dalagu',
      'referrals.step1': 'Link kee addaa qoodi',
      'referrals.step2': 'Hiriyoonni link keetiin galmaa’u',
      'referrals.step3': 'Inveestii jalqabaa ni godhu',
      'referrals.step4': 'Ati mindaa saffisaan argatta',
      'referrals.bonusTip': 'Gorsa Dabalataa',
      'referrals.bonusCopy':
         'Namoonni pakeejii ol’aanaa filatan mindaa siif dabalu. Faayidaa pakeejii olaanaa himi!',
      'referrals.copyToast': 'Copy taasifame',
      'profile.title': 'Qindaa’ina Piroofaayilii',
      'profile.subtitle': 'Odeeffannoo fi filannoo kee to’achi',
      'profile.personalInfo': 'Odeeffannoo Dhuunfaa',
      'profile.firstName': 'Maqaa Jalqabaa',
      'profile.lastName': 'Maqaa Dhuma',
      'profile.email': 'Imeelii',
      'profile.phone': 'Bilbila',
      'profile.address': 'Teessoo',
      'profile.addressPlaceholder': '123 Main St, Magaalaa, Biyya',
      'profile.save': 'Ni Kuusa',
      'profile.security': 'Nageenya',
      'profile.currentPassword': 'Jecha Darbii Amma',
      'profile.newPassword': 'Jecha Darbii Haaraa',
      'profile.confirmPassword': 'Mirkanneessi',
      'profile.updatePassword': 'Jecha darbii haaromsi',
      'profile.notifications': 'Beeksisoota',
      'profile.emailNotif': 'Beeksisa Imeelii',
      'profile.emailNotifDesc': 'Imeelii dhaan odeeffannoo argi',
      'profile.smsNotif': 'Beeksisa SMS',
      'profile.smsNotifDesc': 'SMS dhaan ergaa argi',
      'profile.profitNotif': 'Beeksisa Faayidaa Guyyaa',
      'profile.profitNotifDesc': 'Oduu faayidaa guyyaa guyyaatti',
      'profile.withdrawNotif': 'Oduu Baafataa',
      'profile.withdrawNotifDesc': 'Haala baafataa',
      'profile.saveToast': 'Fooyya’insi piroofaayilii amma hin jiru.',
      'profile.passwordToast': 'Jechi darbii haaromsuu amma hin danda’amu.',
      'profile.changeAvatar': 'Suuraa Jijjiiri',
      'profile.accountInfo': 'Odeeffannoo Herregaa',
      'profile.memberSince': 'Guyyaa Galmaa’inaa:',
      'profile.vipStatus': 'Sadarkaa VIP:',
      'profile.verified': 'Mirkanaa’e:',
      'profile.roleAdmin': 'Bulchaa',
      'profile.roleMember': 'Hirmaataa',
      'profile.dangerZone': 'Iddoo Sodaachisaa',
      'profile.deleteCopy': 'Herrega kee fi odeeffannoo hunda haquu ni danda’a',
      'profile.delete': 'Herrega Haqi',
      'common.yes': 'Eeyyee',
      'common.no': 'Lakki',
      'admin.title': 'Bulchaa',
      'admin.processProfits': 'Faayidaa Guyyaa Dalagi',
      'admin.runJob': 'Amma Jalqabi',
      'admin.processing': 'Hojjetamaa jira...',
      'admin.done': 'Xumurame',
      'admin.failed': 'Hin milkoofne',
      'admin.approveInvestment': 'Inveestii Mirkaneessi',
      'admin.pendingInvestments': 'Inveestii Eeggataa',
      'admin.package': 'Pakeejii:',
      'admin.amount': 'Hanga:',
      'admin.status': 'Haala:',
      'admin.approve': 'Mirkaneessi',
      'admin.loading': 'Fe’amaa jira...',
      'admin.failedLoad': 'Fe’achuun hin danda’amne',
      'admin.investmentId': 'ID Inveestii',
      'admin.pendingWithdrawals': 'Baafata Eeggataa',
      'admin.approveWithdrawals': 'Baafata To’achi',
      'admin.amountLabel': 'Hanga:',
      'admin.destination': 'Bakki geeffamuu:',
      'admin.withdrawalId': 'ID Baafataa',
      'admin.reject': 'Haquu',
      'admin.markPaid': 'Kaffalame jedhii mallatteessi',
      'admin.approved': 'Mirkanaa’e',
      'admin.updated': 'Ni haaromfame',
      'admin.actionFailed': 'Gocha hin milkoofne',
      'home.badge': "Har'a invest godhi, boodatti hin hafin",
      'home.headline1': 'Investii sirrii godhi',
      'home.headline2': "Bu'a guyyaa guyyaa argadhu",
      'home.subheadline':
         "Inveestoroota kumaatamatti makami; bu'a guyyaa argachuuf pakeejii VIP keenya fayyadami. Nageenya, iftoomina, fi bu'a qabeessa.",
      'home.ctaPrimary': 'Amma invest godhi',
      'home.ctaSecondary': 'Pakeejota ilaali',
      'home.statPackages': 'Pakeejota',
      'home.statDuration': 'Yeroo Inveestii',
      'home.statInvestors': 'Inveestara',
      'home.whyTitle': 'Maaliif filatta',
      'home.whySubtitle':
         'Amanamummaa, iftoomina, fi bu’aa mirkanaa’e irratti hundaa’e. Tajaajila muuxannoo ogummaa ni argatta.',
      'home.benefit.daily.title': 'Bu’aa Guyyaa',
      'home.benefit.daily.desc':
         "Bu'a guyyaa guyyaatti iftoomina guutuun argadhu",
      'home.benefit.secure.title': 'Madalaa Nageenyaa',
      'home.benefit.secure.desc':
         'Sadarkaa baankii, banuu fi odeeffannoo kee eegu',
      'home.benefit.referral.title': 'Mindaa Hirmaachisummaa',
      'home.benefit.referral.desc': 'Hiriyoota affeeruun dabalata argadhu',
      'home.benefit.withdrawals.title': 'Baafata Itti Fufiinsa Qabu',
      'home.benefit.withdrawals.desc':
         'Kaffaltii adda addaa waliin saffisa baafataa argadhu',
      'home.cta2.title': 'Inveestii kee ol-kaasuu qophooftee?',
      'home.cta2.body':
         'Pakeejii xiqqaa irraa jalqabi yookaan Pro fi Ultra banu. Imalli kee amma jalqaba.',
      'home.cta2.button': 'Gatiin ilaali',
      'home.footer': '© 2024 VIP Invest. Mirga hunda ni eeggata.',
      'packages.title': 'Inveestii VIP',
      'packages.titleHighlight': 'Pakeejota',
      'packages.subtitle':
         'Ergaa fi kaayyoo kee tiksu filadhu. Pakeejin hundi bu’aa guyyaa, mindaa hirmaachisummaa, fi baafata nageenyaa of keessaa qaba.',
      'packages.helpTitle': 'Filannoo barbaadaa?',
      'packages.helpBody':
         'Gorsitoonni keenya si gargaaruuf qophaa’an. Pakeejii siif mijaa’u filachuuf nu quunnami.',
      'packages.helpCta': 'Tajaajila Quunnami',
      'packages.toastSuccess': 'Inveestii uumame',
      'packages.toastFail': 'Inveest godhuu hin dandeenye',
      'packages.dialogTitle': 'Kaffaltii Xumuri',
      'packages.dialogPay': 'TeleBirr fayyadami; QR armaan gadii siki',
      'packages.dialogAfterPay': 'Kaffalte booda "Confirm Payment" tuqi',
      'packages.dialogCancel': 'Haqi',
      'packages.dialogConfirm': 'Kaffaleera — Mirkaneessi',
   },
};

interface I18nContextValue {
   language: AppLanguage;
   setLanguage: (lang: AppLanguage) => void;
   t: (key: string, fallback?: string) => string;
}

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

const STORAGE_KEY = 'lucid-lang';

export const I18nProvider = ({ children }: { children: React.ReactNode }) => {
   const [language, setLanguage] = useState<AppLanguage>('en');

   useEffect(() => {
      const stored = localStorage.getItem(STORAGE_KEY) as AppLanguage | null;
      if (stored === 'en' || stored === 'om') {
         setLanguage(stored);
      }
   }, []);

   const setLang = (lang: AppLanguage) => {
      setLanguage(lang);
      localStorage.setItem(STORAGE_KEY, lang);
   };

   const t = (key: string, fallback?: string) => {
      const value = translations[language]?.[key];
      if (value) return value;
      const enValue = translations.en[key];
      if (enValue) return enValue;
      return fallback ?? key;
   };

   const value = useMemo(
      () => ({ language, setLanguage: setLang, t }),
      [language]
   );

   return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export const useI18n = () => {
   const ctx = useContext(I18nContext);
   if (!ctx) throw new Error('useI18n must be used within I18nProvider');
   return ctx;
};
